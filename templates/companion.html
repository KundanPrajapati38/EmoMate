<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="virtualAICompanionTitle">Virtual AI Companion - HopeDose</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/companion.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/face_icon.svg') }}" type="image/svg+xml">
</head>
<body>
    {% include 'header.html' %}
    
    <div class="container page-container">
        <div class="py-4">
            <h1 class="display-4 fw-bold main-title text-center animate__animated animate__fadeInDown" data-lang-key="virtualAICompanionHeading">Virtual AI Companion</h1>
            <p class="lead mb-4 text-center animate__animated animate__fadeInUp" data-lang-key="virtualAICompanionSubtitle"><strong>Your personalized emotional support AI that adapts to your needs</strong></p>
            
            <div class="row">
                <div class="col-12 mb-5">
                    <div class="companion-selection-container animate__animated animate__fadeIn">
                        <h3 class="section-title" data-lang-key="chooseYourCompanion"><i class="fas fa-robot me-2"></i>Choose Your Companion</h3>
                        <div class="companion-options">
                            <div class="companion-option" id="female-option">
                                <div class="companion-avatar female-avatar"><i class="fas fa-user"></i></div>
                                <h4 data-lang-key="female">Female</h4>
                                <button class="btn btn-outline-primary select-btn" data-companion="female" data-lang-key="select">Select</button>
                            </div>
                            <div class="companion-option" id="male-option">
                                <div class="companion-avatar male-avatar"><i class="fas fa-user"></i></div>
                                <h4 data-lang-key="male">Male</h4>
                                <button class="btn btn-outline-primary select-btn" data-companion="male" data-lang-key="select">Select</button>
                            </div>
                        </div>
                    </div>




                </div>
                
                <div class="col-lg-8 mb-4">
                    <div class="interaction-container animate__animated animate__fadeInUp">
                        <div class="companion-header">
                            <div class="companion-avatar" id="selected-avatar"><i class="fas fa-user"></i></div>
                            <div class="companion-info">
                                <h3 id="companion-name" data-lang-key="aiCompanion">AI Companion</h3>
                                <p class="companion-status"><span class="status-dot"></span> <span data-lang-key="onlineStatus">Online and ready to help</span></p>
                            </div>
                            <div class="call-controls">
                                <button id="voice-call-btn" class="btn btn-sm btn-outline-primary" title="Voice Chat" data-lang-key="voiceChatButton"><i class="fas fa-microphone"></i></button>
                                <button id="toggle-avatar-btn" class="btn btn-sm btn-outline-info" title="Toggle 3D Avatar" style="display: none;"><i class="fas fa-robot"></i></button>
                            </div>
                        </div>
                        
                        <div class="companion-model-and-chat-container">
                            <div id="avatar-display-container">
                                <canvas id="avatar-canvas"></canvas>
                            </div>
                            <div class="chat-container">
                                <div class="chat-messages" id="chat-messages">
                                    <div class="message companion-message"><div class="message-content" data-lang-key="initialCompanionMessage">Hello! I'm your AI companion. I'm here to help you better. How are you feeling today?</div></div>
                                </div>
                                <div class="chat-input">
                                    <button id="voice-input-btn" class="btn btn-light" title="Voice Input" data-lang-key="voiceInputButton"><i class="fas fa-microphone"></i></button>
                                    <input type="text" id="user-input" placeholder="Type your message..." class="form-control" data-lang-key="typeYourMessagePlaceholder">
                                    <button id="send-btn" class="btn btn-primary" data-lang-key="sendButton"><i class="fas fa-paper-plane"></i></button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                
                <div class="col-lg-4 mb-4">
                    <div class="emotional-state-container animate__animated animate__fadeInRight" style="display: none;">
                        <h3 class="section-title" data-lang-key="emotionalJourney"><i class="fas fa-heart-pulse me-2"></i>Your Emotional Journey</h3>
                        <div class="current-emotion">
                            <h4 data-lang-key="currentState">Current State</h4>
                            <div class="emotion-display">
                                <div id="current-emotion-icon"><i class="fas fa-face-smile"></i></div>
                                <div id="current-emotion-text" data-lang-key="neutralEmotion">Neutral</div>
                            </div>
                        </div>
                        <div class="target-emotion">
                            <h4 data-lang-key="targetState">Target State</h4>
                            <select id="target-emotion" class="form-select">
                                <option value="happy" data-lang-key="happy">Happy</option>
                                <option value="calm" data-lang-key="calm">Calm</option>
                                <option value="energetic" data-lang-key="energetic">Energetic</option>
                                <option value="focused" data-lang-key="focused">Focused</option>
                                <option value="relaxed" data-lang-key="relaxed">Relaxed</option>
                            </select>
                            <button id="set-target-btn" class="btn btn-success mt-2" data-lang-key="setGoalButton">Set Goal</button>
                        </div>
                        
                        <!-- Skin Selection Section -->
                        <!-- <div class="skin-selection-container mt-4">
                            <h4 class="section-title" data-lang-key="skinSelection"><i class="fas fa-palette me-2"></i>Skin Selection</h4>
                            <div class="skin-options d-flex justify-content-around mt-2">
                                <button class="btn btn-outline-secondary" onclick="setCompanionSkin('default')">Default</button>
                                <button class="btn btn-outline-danger" onclick="setCompanionSkin('redSkin')">Red Skin</button>
                                <button class="btn btn-outline-primary" onclick="setCompanionSkin('blueOutfit')">Blue Outfit</button>
                            </div>
                        </div> -->

                        <div class="emotional-progress-report-container mt-4 animate__animated animate__fadeInUp" style="display: none;">
                            <h3 class="section-title" data-lang-key="emotionalProgressReport"><i class="fas fa-chart-line me-2"></i>Emotional Progress Report</h3>
                            <canvas id="emotion-chart"></canvas>
                        </div>


                    </div>
                </div>
                
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r126/three.min.js" integrity="sha512-n8IpKWzDnBOcBhRlHirMZOUvEq2bLRMuJGjuVqbzUJwtTsgwOgK5aS0c1JA647XWYfqvXve8k3PtZdzpipFjgg==" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/three@0.126.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://unpkg.com/fflate@0.8.2"></script>
    <script src="https://unpkg.com/three@0.126.0/examples/js/loaders/FBXLoader.js"></script>
    <script src="{{ url_for('static', filename='js/language_toggle.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme_toggle.js') }}"></script>
    <script src="{{ url_for('static', filename='js/companion-3d.js') }}"></script>
    <script src="{{ url_for('static', filename='js/companion-speech.js') }}"></script>
    <script src="{{ url_for('static', filename='js/companion-ui.js') }}"></script>
    {% include 'footer.html' %}
</body>
</html>